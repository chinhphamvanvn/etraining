<div class="md-card">
	<div class="md-card-content uk-margin">
		<a class="md-btn  md-btn-wave-light md-btn-icon uk-margin-right"
			ng-click="vm.addSection()"> <i
			class="uk-icon-plus uk-text-success"></i> <span class="uk-text-muted">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.ADD_SECTION'|translate}}</span>
		</a> <span class="icheck-inline"> <input type="checkbox"
			class="switchery switchery-small" ui-switch color="#7cb342"
			name="switch_publish" id="switch_publish"
			ng-change="vm.changePublishStatus()" ng-model="vm.edition.published" />
			<label for="switch_publish" class="inline-label">{{'MODEL.EDITION.PUBLISH'|translate}}</label>
		</span> <i class="uk-icon-expand uk-icon-small uk-float-right"
			data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
			title="{{'ACTION.EXPAND'|translate}}" ng-show="!vm.expandMode"
			ng-click="vm.expandAll()"></i> <i
			class="uk-icon-compress  uk-icon-small uk-float-right"
			data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
			title="{{'ACTION.COLLAPSE'|translate}}" ng-show="vm.expandMode"
			ng-click="vm.collapseAll()"></i>

		<div class="md-card  uk-margin" ng-repeat="root in vm.nodes"
			ng-class="(root.data.hasContent) ? 'md-card-success':'md-card-primary'"
			on-last-repeat>
			<div class="md-card-toolbar">
				<h3 class="md-card-toolbar-heading-text">
					{{root.data.name}} <i
						class="md-icon material-icons"
						ng-click="vm.editSection(root)"
						data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
						title="{{'ACTION.EDIT'|translate}}">edit</i> <i
						class="uk-icon-arrow-up uk-icon-small"
						ng-click="vm.goUp(root)"
						data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
						title="{{'ACTION.UP'|translate}}"></i> <i
						class="uk-icon-arrow-down uk-icon-small "
						ng-click="vm.goDown(root)"
						data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
						title="{{'ACTION.DOWN'|translate}}"></i>
				</h3>
				<div class="uk-button-dropdown "
					data-uk-dropdown="{pos:'right',mode:'click'}">
					<div class="md-card-toolbar-heading-text">
						<i class="uk-icon-arrows uk-icon-small uk-margin-right "
							data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
							title="{{'ACTION.MOVE'|translate}}"></i>
					</div>
					<div class="uk-dropdown uk-dropdown-large uk-dropdown-scrollable">
						<ul class="uk-nav uk-nav-dropdown">
							<li ng-show="vm.validateParentNode(root,nodeItem)"
								ng-repeat="nodeItem in vm.nodeArray"><a href="#"
								ng-click="vm.moveSection(root,nodeItem)">{{nodeItem.title}}</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="md-card-toolbar-actions">
					<span class="icheck-inline"> <input type="checkbox"
						name="section_visible" id="section_visible" icheck
						ng-model="root.data.visible" ng-change="vm.editVisible(root)" /> <label
						for="section_visible" class="inline-label">{{'ACTION.SHOW'|translate}}</label>
					</span> <a ng-click="vm.removeSection(root)"
						data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
						title="{{'ACTION.DELETE'|translate}}"><i
						class="md-icon material-icons uk-text-danger">delete</i></a>
				</div>
			</div>
			<div class="md-card-content">
				<a ng-show="!vm.hasUnitSection(root)"
					class="md-btn  md-btn-wave-light md-btn-icon uk-margin-right"
					ng-click="vm.addSubsection(root)"> <i
					class="uk-icon-plus uk-text-success"></i> <span
					class="uk-text-muted">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.ADD_SECTION'|translate}}</span>
				</a>
				<div ng-show="vm.hasUnitSection(root) || root.children.length==0"
					class="uk-button-dropdown" data-uk-dropdown="{mode:'click'}">
					<button class="md-btn  md-btn-wave-light md-btn-icon uk-text-muted">
						<i class="uk-icon-plus uk-text-success"></i>
						{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.ADD_UNIT'|translate}}
					</button>
					<div class="uk-dropdown">
						<ul class="uk-nav uk-nav-dropdown">
							<li><a href="#" ng-click="vm.addUnit(root,'html')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.HTML'|translate}}</a>
							</li>
							<li><a href="#" ng-click="vm.addUnit(root,'scorm')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.SCORM'|translate}}</a>
							</li>
							<li><a href="#" ng-click="vm.addUnit(root,'test')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.TEST'|translate}}</a>
							</li>
							<li><a href="#" ng-click="vm.addUnit(root,'video')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.VIDEO'|translate}}</a>
							</li>
							<li><a href="#" ng-click="vm.addUnit(root,'survey')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.SURVEY'|translate}}</a>
							</li>
							<li><a href="#" ng-click="vm.addUnit(root,'exercise')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.EXERCISE'|translate}}</a>
							</li>
							<li><a href="#" ng-click="vm.addUnit(root,'practice')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.PRACTICE'|translate}}</a>
							</li>
							<li><a href="#id_close" data-uk-modal>{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.SCORM'|translate}}</a>
							</li>
						</ul>
					</div>
				</div>
				<i class="uk-icon-expand uk-icon-small uk-float-right"
					data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
					title="{{'ACTION.EXPAND'|translate}}" ng-show="!root.expand"
					ng-click="vm.expand(root)"></i> <i
					class="uk-icon-compress  uk-icon-small uk-float-right"
					data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
					title="{{'ACTION.COLLAPSE'|translate}}" ng-show="root.expand"
					ng-click="vm.collapse(root)"></i>
				<div ng-show="root.expand" class="uk-margin">
					<div ng-repeat="node in root.children" ng-include="'subTree'">
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div id="id_close" class="uk-modal">
    <div class="uk-modal-dialog">
        <a class="uk-modal-close uk-close"></a>
        <p style="font-weight: bold;">{{"ALERT.COURSE.LOCK" | translate}}</p>
    </div>
</div>

<script type="text/ng-template" id="subTree">
  <div class="md-card uk-margin" ng-class="(node.data.hasContent) ? 'md-card-success':'md-card-primary'">
    <div class="md-card-toolbar">
      <h3 class="md-card-toolbar-heading-text">
        {{node.data.name}}
        <i class="md-icon material-icons " ng-click="vm.editSection(node)"
           data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}" title="{{'ACTION.EDIT'|translate}}">edit</i>
        <i class="uk-icon-arrow-up uk-icon-small " ng-click="vm.goUp(node)"
           data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}" title="{{'ACTION.UP'|translate}}"></i>
        <i class="uk-icon-arrow-down uk-icon-small " ng-click="vm.goDown(node)"
           data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}" title="{{'ACTION.DOWN'|translate}}"></i>
      </h3>
      <div class="uk-button-dropdown " data-uk-dropdown="{pos:'right',mode:'click'}">
        <div class="md-card-toolbar-heading-text">
          <i class="uk-icon-arrows uk-icon-small uk-margin-right " data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
             title="{{'ACTION.MOVE'|translate}}"></i>
        </div>
        <div class="uk-dropdown uk-dropdown-large uk-dropdown-scrollable">
          <ul class="uk-nav uk-nav-dropdown">
            <li ng-show="vm.validateParentNode(node,nodeItem)" ng-repeat="nodeItem in vm.nodeArray"><a href="#"
                                                                                                       ng-click="vm.moveSection(node,nodeItem)">{{nodeItem.title}}</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="md-card-toolbar-actions">
				<span class="icheck-inline">
                       <input type="checkbox" name="section_visible" id="section_visible" required icheck
                              ng-model="node.data.visible" ng-change="vm.editVisible(node)"/>
                      <label for="section_visible" class="inline-label">{{'ACTION.SHOW'|translate}}</label>
                 </span>
        <a ng-click="vm.removeSection(node)" data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
           title="{{'ACTION.DELETE'|translate}}"><i class="md-icon material-icons uk-text-danger">delete</i></a>
      </div>
    </div>
    <div class="md-card-content">
      <div ng-show="!node.data.hasContent">
        <a ng-show="!vm.hasUnitSection(node)" class="md-btn  md-btn-wave-light md-btn-icon  uk-margin-right"
           ng-click="vm.addSubsection(node)">
          <i class="uk-icon-plus uk-text-success"></i>
          <span
            class="uk-text-muted">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.ADD_SECTION'|translate}}</span>
        </a>
        <div ng-show="(vm.hasUnitSection(node) || node.children.length==0)" class="uk-button-dropdown uk-margin-right"
             data-uk-dropdown="{mode:'click'}">
          <button class="md-btn  md-btn-wave-light md-btn-icon uk-text-muted"><i
            class="uk-icon-plus uk-text-success"></i>
            {{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.ADD_UNIT'|translate}}
          </button>
          <div class="uk-dropdown">
            <ul class="uk-nav uk-nav-dropdown">
              <li><a href="#" ng-click="vm.addUnit(node,'html')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.HTML'|translate}}</a>
              </li>
			<li><a href="#" ng-click="vm.addUnit(node,'scorm')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.SCORM'|translate}}</a>
              </li>
              <li><a href="#" ng-click="vm.addUnit(node,'test')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.TEST'|translate}}</a>
              </li>
              <li><a href="#" ng-click="vm.addUnit(node,'video')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.VIDEO'|translate}}</a>
              </li>
              <li><a href="#" ng-click="vm.addUnit(node,'survey')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.SURVEY'|translate}}</a>
              </li>
			  <li><a href="#" ng-click="vm.addUnit(node,'exercise')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.EXERCISE'|translate}}</a>
              </li>
			  <li><a href="#" ng-click="vm.addUnit(node,'practice')">{{'PAGE.LMS.MY_COURSES.TEACHER_BOARD.COURSE_OUTLINE.PRACTICE'|translate}}</a>
              </li>
            </ul>
          </div>
        </div>
        <i class="uk-icon-expand uk-icon-small uk-float-right" data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
           title="{{'ACTION.EXPAND'|translate}}" ng-show="!node.expand" ng-click="vm.expand(node)"></i>
        <i class="uk-icon-compress  uk-icon-small uk-float-right" data-uk-tooltip="{cls:'uk-tooltip-small',pos:'top'}"
           title="{{'ACTION.COLLAPSE'|translate}}" ng-show="node.expand" ng-click="vm.collapse(node)"></i>
        <div ng-show="node.expand" class="uk-margin">
          <div ng-repeat="node in node.children" ng-include="'subTree'">
          </div>
        </div>
      </div>
    </div>
  </div>
</script>


